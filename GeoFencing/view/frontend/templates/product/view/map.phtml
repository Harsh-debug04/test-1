<?php
/**
 * @var \Magento\Framework\View\Element\Template $block
 * @var \AgriCart\GeoFencing\ViewModel\Map $viewModel
 */
$viewModel = $block->getViewModel();
?>

<?php if ($viewModel->isMapVisible()): ?>
<div class="geofencing-map-wrapper">
    <div id="geofencing-map-container" style="height: 400px; width: 100%; margin-top: 20px;"></div>
</div>
<!-- Use x-magento-init to reliably initialize the map component with data from the ViewModel -->
<script type="text/x-magento-init">
{
    "#geofencing-map-container": {
        "AgriCart_GeoFencing/js/map-view": <?= /* @noEscape */ $viewModel->getMapConfigJson() ?>
    }
}
</script>
<?php endif; ?>
